package core.pages;

import com.codeborne.selenide.Condition;
import core.element.SElement;
import core.pages.actionbar.TopActionBar;
import core.pages.leftmenu.LeftMenu;
import org.openqa.selenium.By;
import ru.yandex.qatools.allure.annotations.Step;

import static com.codeborne.selenide.Selenide.$;

/**
 * Created by Aleks on 27.06.2017.
 */
public class MailPage {
    protected LeftMenu leftMenu;
    protected TopActionBar topActionBar;


    public MailPage() {
        leftMenu = new LeftMenu();
        topActionBar = new TopActionBar();
    }

    @Step("Выйти из учетной записи")
    public void logout() {
        topActionBar.getUserNameButton().click();
        topActionBar.getLogoutButton().click();
    }

    @Step("Поиск письма по {0}")
    public MailPage searchMail(String searchBySender) {
        topActionBar.getSearchField().click();
        topActionBar.getSearchField().sendKeys(searchBySender);
        return new MailPage();
    }

    @Step("Проверяем, что отправитель {0} есть в списках результата")
    public void assertSearchResultIsFine(String resultBySender) {
        new SElement($(By.xpath("//div[@class ='ns-view-container-desc']//div[@class ='mail-User-Name']"))).should(Condition.text(resultBySender));
    }


}
